<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no" />
  <title>å…¨å›½æˆ¿ç§Ÿç¨è´¹è®¡ç®—å™¨ï¼ˆ2025ç‰ˆï¼‰</title>

  <!-- è½»é‡ç¾åŒ–æ’ä»¶ï¼šPure-CSS Form Kitï¼ˆå†…ç½®ï¼Œæ— å¤–é“¾ï¼‰ -->
  <style>
    :root{
      --pri:#07c160; --txt:#111; --mut:#6b7280; --bg:#f6f7fb; --card:#fff;
      --bd:#e5e7eb; --bd-strong:#d1d5db; --shadow:0 6px 20px rgba(0,0,0,.06);
      --radius:14px; --radius-sm:10px; --focus:#16a34a;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;
         color:var(--txt);background:linear-gradient(180deg,#f9fafb 0%,#eef2ff 100%) fixed;}
    .wrap{max-width:820px;margin:0 auto;padding:20px}
    .header{margin:6px 0 16px}
    .title{font-size:22px;font-weight:800;letter-spacing:.2px}
    .subtitle{color:var(--mut);font-size:13px;margin-top:6px}

    .card{background:var(--card);border:1px solid var(--bd);
          border-radius:var(--radius);box-shadow:var(--shadow);padding:18px}

    /* æ …æ ¼ï¼šçª„å±è‡ªåŠ¨æ¢è¡Œï¼Œé¿å…â€œç¢°æ’â€ */
    .row{display:flex;flex-wrap:wrap;gap:14px}
    .col{flex:1 1 340px;min-width:240px}

    /* è¡¨å•ç¾åŒ–ï¼ˆæ’ä»¶æ ¸å¿ƒï¼‰ */
    .field{margin:10px 0}
    .label{font-size:13px;color:var(--mut);margin:0 0 6px 4px}
    .input,.select{width:100%;appearance:none;background:#fff;border:1px solid var(--bd);
      border-radius:var(--radius-sm);padding:12px 14px;font-size:15px;outline:none;
      transition:.15s box-shadow,.15s border}
    .input:focus,.select:focus{border-color:var(--focus);box-shadow:0 0 0 4px rgba(22,163,74,.12)}
    .select{background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="%236b7280"><path d="M7 10l5 5 5-5z"/></svg>');
      background-repeat:no-repeat;background-position:right 12px center;padding-right:38px}

    .btn{width:100%;padding:12px 14px;border:none;border-radius:12px;background:var(--pri);
      color:#fff;font-weight:700;font-size:16px;cursor:pointer;transition:.15s transform,.15s opacity}
    .btn:active{transform:translateY(1px)}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .btn-outline{background:#fff;color:var(--pri);border:1px solid var(--pri)}

    /* å¤é€‰æ¡†æ’ç‰ˆä¸å¯¹é½ */
    .checks{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:10px}
    .check{display:flex;align-items:center;gap:10px;border:1px dashed var(--bd);
      padding:10px 12px;border-radius:12px;background:#fcfcfd}
    .check input[type=checkbox]{width:18px;height:18px;accent-color:var(--pri)}

    .divider{height:1px;background:var(--bd);margin:16px 0}
    .result{margin-top:10px}
    .item{display:flex;justify-content:space-between;padding:10px 0;border-bottom:1px dashed var(--bd)}
    .item:last-child{border-bottom:none}
    .mut{color:var(--mut);font-size:12px}

    .cta{display:flex;flex-direction:column;gap:10px}
    .lead{display:none}
    .lead img{width:180px;height:180px;border-radius:12px;border:1px solid var(--bd-strong)}

    .foot{color:#667085;font-size:12px;line-height:1.65}
    .foot a{color:#2563eb;text-decoration:underline} /* é“¾æ¥æ˜æ˜¾å¯ç‚¹ */

    /* å°å±ä¼˜åŒ– */
    @media (max-width:420px){
      .col{min-width:100%}
      .title{font-size:20px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <div class="title">å…¨å›½æˆ¿ç§Ÿç¨è´¹è®¡ç®—å™¨ï¼ˆ2025ç‰ˆï¼‰</div>
      <div class="subtitle">å£å¾„ï¼ˆæŒ‰æœˆï¼‰ï¼šä½å®…æˆ¿äº§ç¨4%ã€ä¸ªç¨10%ï¼›æ”¯æŒâ€œæ‰£é™¤800å…ƒâ€é€‰é¡¹ã€‚éä½å®…ç¨ç‡ä¸ºç¤ºä¾‹ï¼Œå¯æ ¹æ®éœ€è¦è°ƒæ•´ã€‚</div>
    </div>

    <div class="card">
      <div class="row">
        <div class="col field">
          <div class="label">æœˆç§Ÿé‡‘ï¼ˆå…ƒï¼‰</div>
          <input id="rent" type="number" min="0" placeholder="ä¾‹å¦‚ 5000" class="input" />
        </div>
        <div class="col field">
          <div class="label">æˆ¿å±‹ç±»å‹</div>
          <select id="houseType" class="select">
            <option value="residential">ä½å®…ï¼ˆæˆ¿äº§ç¨4%ï¼Œä¸ªç¨10%ï¼‰</option>
            <option value="non_residential">éä½å®…ï¼ˆç¤ºä¾‹ï¼šæˆ¿äº§ç¨12%ï¼Œä¸ªç¨20%ï¼‰</option>
          </select>
        </div>
      </div>

      <div class="field">
        <div class="label">æ‰£é™¤é€‰é¡¹ï¼ˆæŒ‰æœˆï¼‰</div>
        <div class="checks">
          <label class="check">
            <input type="checkbox" id="propDeduction" />
            <span>æˆ¿äº§ç¨æ‰£é™¤ 800 å…ƒä¿®ç¼®è´¹</span>
          </label>
          <label class="check">
            <input type="checkbox" id="incDeduction" />
            <span>ä¸ªç¨æ‰£é™¤ 800 å…ƒç§Ÿé‡‘</span>
          </label>
        </div>
      </div>

      <button id="calcBtn" class="btn">è®¡ç®—</button>

      <div id="result" class="result" style="display:none;">
        <div class="divider"></div>
        <div class="item"><span>æˆ¿äº§ç¨ï¼ˆçº¦ / æœˆï¼‰</span><b id="propTax">-</b></div>
        <div class="item"><span>ä¸ªäººæ‰€å¾—ç¨ï¼ˆçº¦ / æœˆï¼‰</span><b id="incTax">-</b></div>
        <div class="item"><span>åˆè®¡ç¨è´¹ï¼ˆçº¦ / æœˆï¼‰</span><b id="totalTax">-</b></div>
        <div class="mut" style="margin-top:8px;">æç¤ºï¼šè‹¥åŸºæ•°â‰¤800 å…ƒï¼Œåˆ™ç›¸åº”ç¨ç›®å¯ä¸º 0ï¼›é€‰æ‹©é¡¹ä»…å½±å“åŸºæ•°ï¼Œè¯·ä»¥ç¨åŠ¡æœºå…³å£å¾„ä¸ºå‡†ã€‚</div>
      </div>

      <div class="divider"></div>

      <div class="cta">
        <button id="freeLawBtn" class="btn btn-outline">å…è´¹è·å–å¾‹å¸ˆå»ºè®®</button>
        <div id="leadTips" class="lead mut">
          ğŸ‘‰ æ·»åŠ å¾‹å¸ˆå¾®ä¿¡ï¼š<b>Martcoser</b>ï¼ˆå¤‡æ³¨â€œç§ŸèµèŠ‚ç¨â€ï¼‰<br/>
          æˆ–æ‰«ç è¿›ç¾¤ï¼ˆé•¿æŒ‰ä¿å­˜ï¼‰ï¼š<br/>
          <img src="/group-qrcode.png" alt="å¾®ä¿¡ç¾¤äºŒç»´ç " onerror="this.style.display='none'">
        </div>
        <button id="paidBtn" class="btn">è¿›å…¥è¯¦ç»†èŠ‚ç¨æ–¹æ¡ˆä»˜è´¹ç¾¤ Â¥100</button>
      </div>

      <div class="divider"></div>

      <div class="foot">
        <b>å…è´£å£°æ˜</b><br/>
        1. æœ¬å·¥å…·ä»…ä¾›å‚è€ƒï¼Œå®é™…åº”çº³ç¨é¢ä»¥ç¨åŠ¡æœºå…³æ ¸å®šä¸ºå‡†ã€‚<br/>
        2. è®¡ç®—åŸºäºæœˆåº¦å£å¾„ï¼›â€œæ‰£é™¤ 800 å…ƒâ€ç³»ç¤ºä¾‹å¼€å…³ï¼Œåœ°åŒºå£å¾„å¯èƒ½å­˜åœ¨å·®å¼‚ã€‚<br/>
        3. å‡ºç§Ÿäººåº”ä¾æ³•å¦‚å®ç”³æŠ¥å¹¶ä¿å­˜å‡­è¯ã€‚<br/>
        4. æ¡ä¾‹åŸæ–‡ï¼š<a target="_blank" href="https://www.gov.cn/gongbao/2025/issue_12186/202507/content_7034094.html">å›½åŠ¡é™¢ä»¤ç¬¬812å·ã€Šä½æˆ¿ç§Ÿèµæ¡ä¾‹ã€‹</a>
      </div>
    </div>
  </div>

  <script>
    // â€”â€”å¯åœ¨æ­¤é›†ä¸­é…ç½®ä½ çš„é“¾æ¥â€”â€”
    const PAID_URL = 'https://example.com/pay?product=tax-plan&price=100';

    const rentEl = document.getElementById('rent');
    const typeEl = document.getElementById('houseType');
    const calcBtn = document.getElementById('calcBtn');
    const resultBox = document.getElementById('result');
    const propEl = document.getElementById('propTax');
    const incEl  = document.getElementById('incTax');
    const totalEl= document.getElementById('totalTax');
    const propDeductionEl = document.getElementById('propDeduction');
    const incDeductionEl = document.getElementById('incDeduction');

    const freeLawBtn = document.getElementById('freeLawBtn');
    const leadTips = document.getElementById('leadTips');
    const paidBtn = document.getElementById('paidBtn');

    function toast(msg){ alert(msg); }

    async function doCalc() {
      const rent = Number(rentEl.value);
      const houseType = typeEl.value;
      const propDeduction = !!propDeductionEl.checked;
      const incDeduction = !!incDeductionEl.checked;

      if (!rent || rent <= 0) { toast('è¯·è¾“å…¥æœ‰æ•ˆçš„æœˆç§Ÿé‡‘'); return; }
      calcBtn.disabled = true;

      try {
        const res = await fetch('/api/tax/calc-simple', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ monthlyRent: rent, houseType, propDeduction, incDeduction })
        });
        const data = await res.json();
        if (data.code !== 0) throw new Error(data.msg || 'è®¡ç®—å¤±è´¥');

        const r = data.data;
        propEl.textContent = r.propertyTax.toFixed(2) + ' å…ƒ';
        incEl.textContent  = r.incomeTax.toFixed(2) + ' å…ƒ';
        totalEl.textContent= r.totalTax.toFixed(2) + ' å…ƒ';
        resultBox.style.display = 'block';
      } catch (e) {
        toast(e.message || 'è¯·æ±‚å¤±è´¥');
      } finally {
        calcBtn.disabled = false;
      }
    }

    calcBtn.addEventListener('click', doCalc);
    freeLawBtn.addEventListener('click', () => { leadTips.style.display = 'block'; });
    paidBtn.addEventListener('click', () => window.open(PAID_URL, '_blank'));
  </script>
</body>
</html>
